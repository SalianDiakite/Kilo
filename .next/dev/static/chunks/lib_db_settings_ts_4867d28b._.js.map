{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Projet-01/projet-perso/Kilo/lib/db/settings.ts"],"sourcesContent":["import { createClient } from \"@/lib/supabase/client\"\r\nimport type { DbUserSettings, DbUserSettingsUpdate } from \"./types\"\r\n\r\nexport async function getUserSettings(userId: string) {\r\n  const supabase = createClient()\r\n  const { data, error } = await supabase.from(\"user_settings\").select(\"*\").eq(\"id\", userId).single()\r\n\r\n  if (error) {\r\n    // Si les paramètres n'existent pas, les créer\r\n    if (error.code === \"PGRST116\") {\r\n      const { data: newSettings, error: createError } = await supabase\r\n        .from(\"user_settings\")\r\n        .insert({ id: userId })\r\n        .select()\r\n        .single()\r\n\r\n      if (createError) throw createError\r\n      return newSettings as DbUserSettings\r\n    }\r\n    throw error\r\n  }\r\n  return data as DbUserSettings\r\n}\r\n\r\nexport async function updateUserSettings(userId: string, updates: DbUserSettingsUpdate) {\r\n  const supabase = createClient()\r\n  const { data, error } = await supabase\r\n    .from(\"user_settings\")\r\n    .update({ ...updates, updated_at: new Date().toISOString() })\r\n    .eq(\"id\", userId)\r\n    .select()\r\n    .single()\r\n\r\n  if (error) throw error\r\n  return data as DbUserSettings\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;;AAGO,eAAe,gBAAgB,MAAc;IAClD,MAAM,WAAW,IAAA,4IAAY;IAC7B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,iBAAiB,MAAM,CAAC,KAAK,EAAE,CAAC,MAAM,QAAQ,MAAM;IAEhG,IAAI,OAAO;QACT,8CAA8C;QAC9C,IAAI,MAAM,IAAI,KAAK,YAAY;YAC7B,MAAM,EAAE,MAAM,WAAW,EAAE,OAAO,WAAW,EAAE,GAAG,MAAM,SACrD,IAAI,CAAC,iBACL,MAAM,CAAC;gBAAE,IAAI;YAAO,GACpB,MAAM,GACN,MAAM;YAET,IAAI,aAAa,MAAM;YACvB,OAAO;QACT;QACA,MAAM;IACR;IACA,OAAO;AACT;AAEO,eAAe,mBAAmB,MAAc,EAAE,OAA6B;IACpF,MAAM,WAAW,IAAA,4IAAY;IAC7B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,iBACL,MAAM,CAAC;QAAE,GAAG,OAAO;QAAE,YAAY,IAAI,OAAO,WAAW;IAAG,GAC1D,EAAE,CAAC,MAAM,QACT,MAAM,GACN,MAAM;IAET,IAAI,OAAO,MAAM;IACjB,OAAO;AACT"}}]
}