{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Projet-01/projet-perso/Kilo/lib/db/profiles.ts"],"sourcesContent":["import { createClient } from \"@/lib/supabase/client\"\r\nimport type { DbProfile, DbProfileUpdate } from \"./types\"\r\n\r\n// Client-side\r\nexport async function getProfile(userId: string) {\r\n  const supabase = createClient()\r\n  const { data, error } = await supabase.from(\"profiles\").select(\"*\").eq(\"id\", userId).single()\r\n\r\n  if (error) throw error\r\n  return data as DbProfile\r\n}\r\n\r\nexport async function updateProfile(userId: string, updates: DbProfileUpdate) {\r\n  const supabase = createClient()\r\n  const { data, error } = await supabase\r\n    .from(\"profiles\")\r\n    .update({ ...updates, updated_at: new Date().toISOString() })\r\n    .eq(\"id\", userId)\r\n    .select()\r\n    .single()\r\n\r\n  if (error) throw error\r\n  return data as DbProfile\r\n}\r\n\r\nexport async function searchProfiles(query: string, limit = 10) {\r\n  const supabase = createClient()\r\n  const { data, error } = await supabase.from(\"profiles\").select(\"*\").ilike(\"name\", `%${query}%`).limit(limit)\r\n\r\n  if (error) throw error\r\n  return data as DbProfile[]\r\n}\r\n\r\nexport async function getPublicProfileById(userId: string) {\r\n  const supabase = createClient()\r\n  const { data, error } = await supabase\r\n    .from(\"profiles\")\r\n    .select(\r\n      \"id, name, avatar, bio, created_at, rating, review_count, verified, languages, response_time\"\r\n    )\r\n    .eq(\"id\", userId)\r\n    .single()\r\n\r\n  if (error) {\r\n    console.error(\"Error fetching public profile:\", error)\r\n    throw error\r\n  }\r\n\r\n  return data\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;AAIO,eAAe,WAAW,MAAc;IAC7C,MAAM,WAAW,IAAA,4IAAY;IAC7B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,YAAY,MAAM,CAAC,KAAK,EAAE,CAAC,MAAM,QAAQ,MAAM;IAE3F,IAAI,OAAO,MAAM;IACjB,OAAO;AACT;AAEO,eAAe,cAAc,MAAc,EAAE,OAAwB;IAC1E,MAAM,WAAW,IAAA,4IAAY;IAC7B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,YACL,MAAM,CAAC;QAAE,GAAG,OAAO;QAAE,YAAY,IAAI,OAAO,WAAW;IAAG,GAC1D,EAAE,CAAC,MAAM,QACT,MAAM,GACN,MAAM;IAET,IAAI,OAAO,MAAM;IACjB,OAAO;AACT;AAEO,eAAe,eAAe,KAAa,EAAE,QAAQ,EAAE;IAC5D,MAAM,WAAW,IAAA,4IAAY;IAC7B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,YAAY,MAAM,CAAC,KAAK,KAAK,CAAC,QAAQ,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,EAAE,KAAK,CAAC;IAEtG,IAAI,OAAO,MAAM;IACjB,OAAO;AACT;AAEO,eAAe,qBAAqB,MAAc;IACvD,MAAM,WAAW,IAAA,4IAAY;IAC7B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,YACL,MAAM,CACL,+FAED,EAAE,CAAC,MAAM,QACT,MAAM;IAET,IAAI,OAAO;QACT,QAAQ,KAAK,CAAC,kCAAkC;QAChD,MAAM;IACR;IAEA,OAAO;AACT"}}]
}